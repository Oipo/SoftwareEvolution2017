<html>
<head><link href="prism.css" rel="stylesheet" />

<body>

<script src="prism.js"></script>

<a name="codeclone0"></a>
<pre><code class="language-java">
{<br/>        Money money = new Money();<br/>        money.value = value;<br/>        return money;<br/>    }
</code></pre><br/><br/>

<a name="codeclone1"></a>
<pre><code class="language-java">
{<br/>		if(param1.isNull()) return 0;<br/>		DateTime.Details details = new DateTime.Details(param1.getLong());<br/>		return details.dayofyear+1;<br/>	}
</code></pre><br/><br/>

<a name="codeclone2"></a>
<pre><code class="language-java">
{<br/>                // reset for the next test<br/>                Statement st = con.createStatement();<br/>                st.execute("DELETE FROM " + tableName);<br/>                st.close();<br/>            }
</code></pre><br/><br/>

<a name="codeclone3"></a>
<pre><code class="language-java">
{<br/>		if(!isInit) return;<br/>		super.printStackTrace(ps);<br/>	}
</code></pre><br/><br/>

<a name="codeclone4"></a>
<pre><code class="language-java">
{<br/>        Money money = new Money();<br/>        money.value = value;<br/>        return money;<br/>    }
</code></pre><br/><br/>

<a name="codeclone5"></a>
<pre><code class="language-java">
{<br/>			// trim for CHAR and BINARY<br/>			if(obj2 instanceof String) obj2 = ((String)obj2).trim();<br/>			if(obj2 instanceof byte[]){<br/>				byte[] tmp = (byte[])obj2;<br/>				int k=tmp.length-1;<br/>				for(; k>= 0; k--) if(tmp[k] != 0) break;<br/>				k++;<br/>				byte[] tmp2 = new byte[k];<br/>				System.arraycopy( tmp, 0, tmp2, 0, k);<br/>				obj2 = tmp2;<br/>			}<br/>		}
</code></pre><br/><br/>

<a name="codeclone6"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>        return Math.cos( param1.getDouble() );<br/>    }
</code></pre><br/><br/>

<a name="codeclone7"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>        return Math.toDegrees( param1.getDouble() );<br/>    }
</code></pre><br/><br/>

<a name="codeclone8"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Expression expr = getValue(i);<br/>            wasNull = expr.isNull();<br/>            return expr.getInt();<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone9"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return new MutableNumeric(getLong());<br/>	}
</code></pre><br/><br/>

<a name="codeclone10"></a>
<pre><code class="language-java">
{<br/>		try {<br/>			Statement st = con.createStatement();<br/>			st.execute("drop view "+name);<br/>			st.close();<br/>		} catch (SQLException e) {/* ignore it, if the view not exist */}<br/>    }
</code></pre><br/><br/>

<a name="codeclone11"></a>
<pre><code class="language-java">
{<br/>                result[i] = EXECUTE_FAILED;<br/>                if(failed == null){<br/>                    failed = new BatchUpdateException(ex.getMessage(), ex.getSQLState(), ex.getErrorCode(), result);<br/>                    failed.initCause(ex);<br/>                }<br/>                failed.setNextException(ex);<br/>            }
</code></pre><br/><br/>

<a name="codeclone12"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return Utils.getInteger(getInt());<br/>	}
</code></pre><br/><br/>

<a name="codeclone13"></a>
<pre><code class="language-java">
{<br/>				DateTime.Details details2 = new DateTime.Details(param2.getLong());<br/>				details2.month += param1.getLong();<br/>				return DateTime.calcMillis(details2);<br/>			}
</code></pre><br/><br/>

<a name="codeclone14"></a>
<pre><code class="language-java">
{<br/>        try {<br/>            dropTable( AllTests.getConnection(), table );<br/>        } catch (SQLException ex) {<br/>            ex.printStackTrace();<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone15"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            String obj = getValue(i).getString();<br/>            wasNull = obj == null;<br/>            return obj;<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone16"></a>
<pre><code class="language-java">
{<br/>		StringBuffer buf = new StringBuffer(bytes.length << 1);<br/>		for(int i=0; i<bytes.length; i++){<br/>			buf.append( digits[ (bytes[i] >> 4) & 0x0F ] );<br/>			buf.append( digits[ (bytes[i]     ) & 0x0F ] );<br/>		}<br/>		return buf.toString();<br/>	}
</code></pre><br/><br/>

<a name="codeclone17"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            MutableNumeric obj = getValue(i).getNumeric();<br/>            wasNull = obj == null;<br/>            if(wasNull) return null;<br/>            return obj.toBigDecimal(scale);<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone18"></a>
<pre><code class="language-java">
{<br/>                failed = true;<br/>                msgBuf.append("\nAdditional entries for language ").append( OTHER_LANGUAGES[i] ).append(": ");<br/>                <br/>                for (Iterator itr = diff.iterator(); itr.hasNext(); ) {<br/>                    msgBuf.append(itr.next());<br/>                    if (itr.hasNext()) msgBuf.append(',');<br/>                }<br/>            }
</code></pre><br/><br/>

<a name="codeclone19"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        Statement st = con.createStatement();<br/>        st.execute("create table "+table+" (a varchar(2) unique)");<br/>        st.execute("alter table "+table+" add b varchar(4) primary key");<br/>        ResultSet rs = st.executeQuery("Select * From " + table);<br/>        assertRSMetaData( rs, new String[]{"a", "b"},  new int[]{Types.VARCHAR, Types.VARCHAR} );<br/>        rs = con.getMetaData().getIndexInfo( null, null, table, false, false );<br/>        assertRowCount( 2, rs );<br/>    }
</code></pre><br/><br/>

<a name="codeclone20"></a>
<pre><code class="language-java">
{<br/>					MutableNumeric num = left.getNumeric();<br/>					num.mul( right.getNumeric() );<br/>					return num;<br/>            	}
</code></pre><br/><br/>

<a name="codeclone21"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>		return Money.parseMoney(getString().trim());<br/>	}
</code></pre><br/><br/>

<a name="codeclone22"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>		return Float.parseFloat(getString().trim());<br/>	}
</code></pre><br/><br/>

<a name="codeclone23"></a>
<pre><code class="language-java">
{<br/>			for(int i=0; i>places; i--){<br/>				factor *= 10;<br/>			}<br/>			value /= factor;<br/>		}
</code></pre><br/><br/>

<a name="codeclone24"></a>
<pre><code class="language-java">
{<br/>		if(param1.getBoolean())<br/>			return param2.getFloat();<br/>		return param3.getFloat();<br/>	}
</code></pre><br/><br/>

<a name="codeclone25"></a>
<pre><code class="language-java">
{<br/>        ByteBuffer buffer = ByteBuffer.allocate(8);<br/>        buffer.putInt(MAGIC_TABLE);<br/>        buffer.putInt(TABLE_VIEW_VERSION);<br/>        buffer.position(0);<br/>        raFile.write(buffer);<br/>	}
</code></pre><br/><br/>

<a name="codeclone26"></a>
<pre><code class="language-java">
{<br/>        if(isNull()) return null;<br/>        return getObject().toString();<br/>    }
</code></pre><br/><br/>

<a name="codeclone27"></a>
<pre><code class="language-java">
{<br/>						if(isTypeTable){<br/>							row[3] = "TABLE";					<br/>							rows.add(row);<br/>						}<br/>					}
</code></pre><br/><br/>

<a name="codeclone28"></a>
<pre><code class="language-java">
{<br/>		if(param1.getBoolean())<br/>			return param2.isNull();<br/>		return param3.isNull();<br/>	}
</code></pre><br/><br/>

<a name="codeclone29"></a>
<pre><code class="language-java">
{<br/>					MutableNumeric num = right.getNumeric();<br/>					num.mul(left.getInt());<br/>					return num;<br/>            	}
</code></pre><br/><br/>

<a name="codeclone30"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>        return Math.pow( param1.getDouble(), param2.getDouble() );<br/>    }
</code></pre><br/><br/>

<a name="codeclone31"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            if(cal == null){<br/>                return getTime(columnIndex);<br/>            }<br/>            Expression expr = getValue(columnIndex);<br/>            wasNull = expr.isNull();<br/>            if(wasNull) return null;<br/>            return new Time(DateTime.addDateTimeOffset( expr.getLong(), cal.getTimeZone() ));<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone32"></a>
<pre><code class="language-java">
{<br/>		try{<br/>			return getCmd().getRow();<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone33"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            if(cal == null){<br/>                return getDate(columnIndex);<br/>            }<br/>            Expression expr = getValue(columnIndex);<br/>            wasNull = expr.isNull();<br/>            if(wasNull) return null;<br/>            return new Date(DateTime.addDateTimeOffset( expr.getLong(), cal.getTimeZone() ));<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone34"></a>
<pre><code class="language-java">
{<br/>        if(isNull()) return null;<br/>        return getString().getBytes();<br/>	}
</code></pre><br/><br/>

<a name="codeclone35"></a>
<pre><code class="language-java">
{<br/>		try{<br/>            moveToCurrentRow();<br/>			return getCmd().absolute(row);<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>    }
</code></pre><br/><br/>

<a name="codeclone36"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Expression expr = getValue(columnIndex);<br/>            wasNull = expr.isNull();<br/>            return expr.getBoolean();<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone37"></a>
<pre><code class="language-java">
{<br/>        try{<br/>			Expression expr = getValue(columnIndex);<br/>            wasNull = expr.isNull();<br/>			if(wasNull) return null;<br/>			return DateTime.getTimestamp( expr.getLong() );<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone38"></a>
<pre><code class="language-java">
{<br/>		byte[] bytes = new byte[length];<br/>		System.arraycopy(puffer, offset, bytes, 0, length);<br/>		offset += length;<br/>		return bytes;<br/>	}
</code></pre><br/><br/>

<a name="codeclone39"></a>
<pre><code class="language-java">
{<br/>            String type2 = rs.getString("TABLE_TYPE");<br/>            assertTrue( type+"-"+type2, type.compareTo(type2)<0);<br/>            type = type2;<br/>            count++;<br/>        }
</code></pre><br/><br/>

<a name="codeclone40"></a>
<pre><code class="language-java">
{<br/>    	if(init) return;<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		dropTable( con, "statement");<br/>		st.execute("Create Table statement (c varchar(30), i counter)");<br/>		init = true;<br/>    }
</code></pre><br/><br/>

<a name="codeclone41"></a>
<pre><code class="language-java">
{<br/>		Connection con1 = AllTests.getConnection();<br/>		Connection con2 = AllTests.createConnection();<br/>		try{		<br/>			con2.setTransactionIsolation( Connection.TRANSACTION_READ_COMMITTED );<br/>			con1.createStatement().execute("Create Table transactions (i int identity, v varchar(20))");<br/>			assertRowCount( 0, "Select * from transactions");<br/><br/>			con1.setAutoCommit(false);<br/>			con1.createStatement().execute("Insert Into transactions(v) Values('qwert2')");<br/><br/>			ResultSet rs2 = con2.createStatement().executeQuery("Select count(*) from transactions");<br/>			assertTrue( rs2.next() );<br/>			assertEquals( 0, rs2.getInt(1) );<br/>		}finally{<br/>            dropTable(con1, "transactions");<br/>			con1.setAutoCommit(true);<br/>			con2.close();<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone42"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return new Double(getDouble());<br/>    }
</code></pre><br/><br/>

<a name="codeclone43"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        Statement st = con.createStatement();<br/>        <br/>        assertEquals(con, st.getConnection() );<br/>    }
</code></pre><br/><br/>

<a name="codeclone44"></a>
<pre><code class="language-java">
{<br/>                            keyColumnNames.add(column.getName());<br/>                            keys.add(valueExpress.getObject());<br/>                            break;<br/>                        }
</code></pre><br/><br/>

<a name="codeclone45"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Connection con = AllTests.getConnection();<br/>            Statement st = con.createStatement();<br/>            st.execute("drop table " + table);<br/>            st.close();<br/>        }catch(Throwable e){<br/>            //e.printStackTrace();<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone46"></a>
<pre><code class="language-java">
{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>		}
</code></pre><br/><br/>

<a name="codeclone47"></a>
<pre><code class="language-java">
{<br/>			int idx = internalExpressions.indexOf(expr);<br/>			if(idx >= 0) return idx;<br/>			internalExpressions.add(expr);<br/>			return internalExpressions.size()-1;<br/>		}
</code></pre><br/><br/>

<a name="codeclone48"></a>
<pre><code class="language-java">
{<br/>		int precision = 0;<br/>		for(int i=results.size()-1; i>=0; i--){<br/>			precision = Math.max(precision, results.get(i).getPrecision());<br/>		}<br/>		return precision;<br/>	}
</code></pre><br/><br/>

<a name="codeclone49"></a>
<pre><code class="language-java">
{<br/>					byte[] buffer = new byte[length];<br/>					System.arraycopy(bytes, 0, buffer, 0, Math.min(bytes.length,length) );<br/>					return buffer;<br/>				}
</code></pre><br/><br/>

<a name="codeclone50"></a>
<pre><code class="language-java">
{<br/>				factor *=10;<br/>				if(factor == 1000000000){<br/>					divImpl(factor);<br/>					factor = 1;<br/>				}<br/>			}
</code></pre><br/><br/>

<a name="codeclone51"></a>
<pre><code class="language-java">
{<br/>        if(value.length == 0 || signum == 0){<br/>            return 0;<br/>        }else{<br/>            if (value.length == 1 && (value[0] > 0)){<br/>                // simple Integer Value<br/>                return value[0] / scaleDoubleFactor[scale] * signum;<br/>            }else<br/>            if (value.length == 1){<br/>                // overflow Integer Value<br/>                long temp = value[0] & 0xFFFFFFFFL;<br/>                return temp / scaleDoubleFactor[scale] * signum;<br/>            }else<br/>            if (value.length == 2 && (value[0] > 0)){<br/>                // simple Long Value<br/>                long temp = (((long)value[0]) << 32) | (value[1] & 0xFFFFFFFFL);<br/>                return temp / scaleDoubleFactor[scale] * signum;<br/>            }else{<br/>                return new BigDecimal( new BigInteger( toByteArray() ), scale ).doubleValue();<br/>            }<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone52"></a>
<pre><code class="language-java">
{<br/>		if(size >= data.length ){<br/>			resize(size << 1);<br/>		}<br/>		data[size++] = expr;<br/>	}
</code></pre><br/><br/>

<a name="codeclone53"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);<br/>		ResultSet rs;<br/>		int count;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by i desc, d");<br/>		<br/>		//jetzt irgendwo in die Mitte scrollen<br/>		rs.next();<br/>		rs.next();<br/>		rs.previous(); //dann soll der Zeiger nicht am Ende des bereits gefetchten stehen<br/>		<br/>		rs.last();<br/>		count = 0;<br/>		while(rs.previous()) count++;		<br/>		assertEquals( valueCount, count );<br/><br/>		rs.beforeFirst();<br/>		count = -1;<br/>		while(rs.next()) count++;		<br/>		assertEquals( valueCount, count );<br/><br/>		rs.beforeFirst();<br/>		count = -1;<br/>		while(rs.next()) count++;		<br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

<a name="codeclone54"></a>
<pre><code class="language-java">
{<br/>			oldValue = rs.getBoolean("b");<br/>			assertFalse(rs.wasNull());<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone55"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		ResultSet rs;<br/>		Integer oldValue;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by i");<br/>		<br/>		assertTrue( rs.next() );<br/>		<br/>		oldValue = (Integer)rs.getObject("i");<br/>		assertNull(oldValue);<br/>		assertTrue( rs.next() );<br/>		oldValue = (Integer)rs.getObject("i");<br/>		<br/>		int count = 1;<br/>		while(rs.next()){<br/>			assertTrue( oldValue.compareTo( (Integer)rs.getObject("i") ) < 0 );<br/>			oldValue = (Integer)rs.getObject("i");<br/>			count++;<br/>		}<br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

<a name="codeclone56"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		ResultSet rs;<br/>		Float oldValue;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by r");<br/>		<br/>		assertTrue( rs.next() );<br/>		<br/>		oldValue = (Float)rs.getObject("r");<br/>		assertNull(oldValue);<br/>		assertTrue( rs.next() );<br/>		oldValue = (Float)rs.getObject("r");<br/>		<br/>		int count = 1;<br/>		while(rs.next()){<br/>			assertTrue( oldValue.compareTo( (Float)rs.getObject("r") ) < 0 );<br/>			oldValue = (Float)rs.getObject("r");<br/>			count++;<br/>		}<br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

<a name="codeclone57"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        try{<br/>            Statement st = con.createStatement();<br/>            st.execute("Create Table DuplicatedColumn(col INT)");<br/>            try{<br/>                st.execute("ALTER TABLE DuplicatedColumn Add Col INT");<br/>                fail("SQLException 'Duplicated Column' should be throw");<br/>            }catch(SQLException e){<br/>                assertSQLException("01000", 0, e);<br/>            }<br/>        }finally{<br/>            dropTable(con, "DuplicatedColumn");<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone58"></a>
<pre><code class="language-java">
{<br/>        String[] array = new String[size];<br/>        System.arraycopy(data, 0, array, 0, size);<br/>        return array;     <br/>    }
</code></pre><br/><br/>

<a name="codeclone59"></a>
<pre><code class="language-java">
{<br/>        SSPreparedStatement pr = new SSPreparedStatement( this, sql);<br/>        pr.setNeedGeneratedKeys(autoGeneratedKeys);<br/>        return pr;<br/>    }
</code></pre><br/><br/>

<a name="codeclone60"></a>
<pre><code class="language-java">
{<br/>			for(int i=0; i<places; i++){<br/>				factor *= 10;<br/>			}<br/>			value *= factor;<br/>		}
</code></pre><br/><br/>

<a name="codeclone61"></a>
<pre><code class="language-java">
{<br/>                TransactionStep page = (TransactionStep)commitPages.remove(i);<br/>                page.rollback();<br/>                page.freeLock();<br/>            }
</code></pre><br/><br/>

<a name="codeclone62"></a>
<pre><code class="language-java">
{<br/>						if(status.nodeValue instanceof IndexNode){<br/>							level++;<br/>							nodeStack.push(<br/>								new IndexNodeScrollStatus( 	(IndexNode)status.nodeValue, <br/>														(expressions.get(level).getAlias() != SQLTokenizer.DESC_STR), <br/>														scroll, level));<br/>							continue;<br/>						}else<br/>							return getReturnValue(status.nodeValue);<br/>					}<br/>					//There is no RowOffset in this node
</code></pre><br/><br/>

<a name="codeclone63"></a>
<pre><code class="language-java">
{<br/>                // There are not the correct count of rows.<br/>                if (count == 0){<br/>                    createTestDataWithClassicInsert( con );<br/>                    rs = st1.executeQuery( "SELECT count(*) FROM " + tableName);<br/>                    rs.next();<br/>                    count = rs.getInt(1);<br/>                }<br/>                if (count != rowCount){<br/>                    System.out.println( "  Failed: Only " + (rowCount-count) + " rows were deleted.");<br/>                    return;<br/>                }<br/>            }
</code></pre><br/><br/>

<a name="codeclone64"></a>
<pre><code class="language-java">
{<br/>					if(expr.isNull())<br/>						dataType = expr.getDataType();<br/>					else<br/>						initValue( expr );<br/>				}
</code></pre><br/><br/>

<a name="codeclone65"></a>
<pre><code class="language-java">
{<br/>		if(!isInit) return;<br/>		super.printStackTrace(pw);<br/>	}
</code></pre><br/><br/>

<a name="codeclone66"></a>
<pre><code class="language-java">
{<br/>		if(size >= data.length ){<br/>			resize(size << 1);<br/>		}<br/>		data[size++] = foreignKey;<br/>	}
</code></pre><br/><br/>

<a name="codeclone67"></a>
<pre><code class="language-java">
{<br/>		ForeignKey[] dataNew = new ForeignKey[newSize];<br/>		System.arraycopy(data, 0, dataNew, 0, size);<br/>		data = dataNew;		<br/>	}
</code></pre><br/><br/>

<a name="codeclone68"></a>
<pre><code class="language-java">
{<br/>		if(param1.isNull()) return 0;<br/>		DateTime.Details details = new DateTime.Details(param1.getLong());<br/>		return details.minute;<br/>	}
</code></pre><br/><br/>

<a name="codeclone69"></a>
<pre><code class="language-java">
{<br/>		if(param1.isNull()) return 0;<br/>		DateTime.Details details = new DateTime.Details(param1.getLong());<br/>		return details.month+1;<br/>	}
</code></pre><br/><br/>

<a name="codeclone70"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Connection con = AllTests.getConnection();<br/>            Statement st = con.createStatement();<br/>            st.execute("drop table " + table);<br/>            st.close();<br/>        }catch(Throwable e){<br/>            //e.printStackTrace();<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone71"></a>
<pre><code class="language-java">
{<br/>        TestSuite theSuite = new TestSuite("Functions");<br/>        for(int i=0; i<TESTS.length; i++){<br/>            theSuite.addTest(new TestFunctions( TESTS[i] ) );<br/>        }<br/>        return theSuite;<br/>    }
</code></pre><br/><br/>

<a name="codeclone72"></a>
<pre><code class="language-java">
{<br/>		Set inserted = new HashSet(); // for duplicates checking<br/>		<br/>		for (int i = 0; i < entries.length; i++) {<br/>			String key = entries[i][0];<br/>			<br/>			if (! inserted.add(key)) {<br/>				throw new IllegalArgumentException("Duplicate key: " + key);<br/>			}<br/>			else {<br/>				String value = entries[i][1];<br/>				messages.put(key, value);<br/>			}<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone73"></a>
<pre><code class="language-java">
{<br/>        try{<br/>			Expression expr = getValue(i);<br/>            wasNull = expr.isNull();<br/>			if(wasNull) return null;<br/>			return DateTime.getTime( expr.getLong() );<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone74"></a>
<pre><code class="language-java">
{<br/>		if(date == null) return null;<br/>		return new DateTime( parse(date), SQLTokenizer.TIMESTAMP);<br/>	}
</code></pre><br/><br/>

<a name="codeclone75"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Object obj = getValue(i).getObject();<br/>            wasNull = obj == null;<br/>            return obj;<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone76"></a>
<pre><code class="language-java">
{<br/>		if(date == null) return null;<br/>		return new DateTime( parse(date), SQLTokenizer.DATE);<br/>	}
</code></pre><br/><br/>

<a name="codeclone77"></a>
<pre><code class="language-java">
{<br/>		String sqlState = (String) sqlStates.get(key);<br/>		assert(sqlState != null): "SQL State code not found: " + key;<br/>		return sqlState;<br/>	}
</code></pre><br/><br/>

<a name="codeclone78"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            return Double.parseDouble( val ) != 0;<br/>        }catch(NumberFormatException e){/*ignore it if it not a number*/}<br/>        return "true".equalsIgnoreCase( val ) || "yes".equalsIgnoreCase( val ) || "t".equalsIgnoreCase( val );<br/>    }
</code></pre><br/><br/>

<a name="codeclone79"></a>
<pre><code class="language-java">
{<br/>        scroll.beforeFirst();<br/>		isAfterLast  = false;<br/>		row = 0;<br/>    }
</code></pre><br/><br/>

<a name="codeclone80"></a>
<pre><code class="language-java">
{<br/>		Connection con = AllTests.getConnection();<br/>		try{			<br/>			con.createStatement().execute("Create Table Scrollable (i counter, v varchar(20))");<br/>			assertRowCount( 0, "Select * from Scrollable");<br/><br/>			con.createStatement().execute("Insert Into Scrollable(v) Values('qwert')");<br/>			assertRowCount( 1, "Select * from Scrollable");<br/>			assertRowCount( 0, "Select * from Scrollable Where 1=0");<br/><br/>            Statement st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);<br/>            testNextWithWhereAssert( st.executeQuery("Select * from Scrollable Where 1=0") );<br/>            testNextWithWhereAssert( st.executeQuery("Select * from Scrollable Where 1=0 Order By v") );<br/>            testNextWithWhereAssert( st.executeQuery("Select v from Scrollable Where 1=0 Group By v") );<br/>            testNextWithWhereAssert( st.executeQuery("Select v from Scrollable Where 1=0 Group By v Order By v") );<br/>		}finally{<br/>            dropTable( con, "Scrollable");<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone81"></a>
<pre><code class="language-java">
{<br/>			for(int i=0; i<places; i++){<br/>				factor *= 10;<br/>			}<br/>			value *= factor;<br/>		}
</code></pre><br/><br/>

<a name="codeclone82"></a>
<pre><code class="language-java">
{<br/>	    ByteBuffer buffer = ByteBuffer.allocate(8);<br/>	    buffer.putInt(MAGIC_INDEX);<br/>	    buffer.putInt(INDEX_VERSION);<br/>	    buffer.position(0);<br/>	    raFile.write(buffer);<br/>	}
</code></pre><br/><br/>

<a name="codeclone83"></a>
<pre><code class="language-java">
{<br/>		if (idx >= size)<br/>			throw new IndexOutOfBoundsException("Index: "+idx+", Size: "+size);<br/>		return data[idx];<br/>	}
</code></pre><br/><br/>

<a name="codeclone84"></a>
<pre><code class="language-java">
{<br/>                        Iterator values = locks.values().iterator();<br/>                        while(values.hasNext()){<br/>                            TableStorePage lock = (TableStorePage)values.next();<br/>                            if(lock.con != con) return null;<br/>                        }<br/>                    }
</code></pre><br/><br/>

<a name="codeclone85"></a>
<pre><code class="language-java">
{<br/>        TestValue value = new TestValue();<br/>        value.dataType  = dataType;<br/>        value.small     = small;<br/>        value.large     = large;<br/>        return value;<br/>    }
</code></pre><br/><br/>

<a name="codeclone86"></a>
<pre><code class="language-java">
{<br/>		Connection con = AllTests.getConnection();<br/>		try{			<br/>			con.createStatement().execute("Create Table Scrollable (i counter, v varchar(20))");<br/>			assertRowCount( 0, "Select * from Scrollable");<br/><br/>			con.createStatement().execute("Insert Into Scrollable(v) Values('qwert')");<br/>			assertRowCount( 1, "Select * from Scrollable");<br/>			assertRowCount( 0, "Select * from Scrollable Where 1=0");<br/><br/>            Statement st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);<br/>            testFirstWithWhereAssert( st.executeQuery("Select * from Scrollable Where 1=0") );<br/>            testFirstWithWhereAssert( st.executeQuery("Select * from Scrollable Where 1=0 Order By v") );<br/>            testFirstWithWhereAssert( st.executeQuery("Select v from Scrollable Where 1=0 Group By v") );<br/>            testFirstWithWhereAssert( st.executeQuery("Select v from Scrollable Where 1=0 Group By v Order By v") );<br/>		}finally{<br/>            dropTable( con, "Scrollable");<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone87"></a>
<pre><code class="language-java">
{<br/>    	try{<br/>    		return getCmd().isLast();<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>    }
</code></pre><br/><br/>

<a name="codeclone88"></a>
<pre><code class="language-java">
{<br/>                prev = node;<br/>                node = node.nextEntry;<br/>                wasNextEntry = true;<br/>            }
</code></pre><br/><br/>

<a name="codeclone89"></a>
<pre><code class="language-java">
{<br/>		try{<br/>            moveToCurrentRow();<br/>            return getCmd().next();<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone90"></a>
<pre><code class="language-java">
{<br/>		if (idx >= size)<br/>			throw new IndexOutOfBoundsException("Column index: "+idx+", Size: "+size);<br/>		return data[idx];<br/>	}
</code></pre><br/><br/>

<a name="codeclone91"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            MutableNumeric obj = getValue(columnIndex).getNumeric();<br/>            wasNull = obj == null;<br/>            if(wasNull) return null;<br/>            return obj.toBigDecimal();<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone92"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            byte[] obj = getValue(columnIndex).getBytes();<br/>            wasNull = obj == null;<br/>            return obj;<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone93"></a>
<pre><code class="language-java">
{<br/>		Connection con = AllTests.getConnection();<br/>		try{			<br/>			con.createStatement().execute("Create Table transactions (i int identity, v varchar(20))");<br/>			assertRowCount( 0, "Select * from transactions");<br/><br/>			con.createStatement().execute("Insert Into transactions(v) Values('qwert')");<br/>			assertRowCount( 1, "Select * from transactions");<br/><br/>			con.setAutoCommit(false);<br/>			con.createStatement().execute("Insert Into transactions(v) Select v From transactions");<br/>			assertRowCount( 2, "Select * from transactions");<br/><br/>			con.createStatement().execute("Insert Into transactions (Select * From transactions)");<br/>			assertRowCount( 4, "Select * from transactions");<br/>			<br/>			con.commit();<br/>			assertRowCount( 4, "Select * from transactions");<br/>			<br/>		}finally{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>			con.setAutoCommit(true);<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone94"></a>
<pre><code class="language-java">
{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>			con.setAutoCommit(true);<br/>		}
</code></pre><br/><br/>

<a name="codeclone95"></a>
<pre><code class="language-java">
{<br/>        TestSuite theSuite = new TestSuite("Operatoren");<br/>        for(int i=0; i<TESTS.length; i++){<br/>            theSuite.addTest(new TestOperatoren( TESTS[i] ) );<br/>        }<br/>        return theSuite;<br/>    }
</code></pre><br/><br/>

<a name="codeclone96"></a>
<pre><code class="language-java">
{<br/>        Object obj = getObject();<br/>        if(obj == null) return null;<br/>        return obj.toString();<br/>    }
</code></pre><br/><br/>

<a name="codeclone97"></a>
<pre><code class="language-java">
{<br/>        if(rs == null)<br/>        	throw SmallSQLException.create(Language.RSET_NOT_PRODUCED);<br/>        return rs;<br/>    }
</code></pre><br/><br/>

<a name="codeclone98"></a>
<pre><code class="language-java">
{<br/>        if(value.length == 0 || signum == 0){<br/>            return 0;<br/>        }else{<br/>            if (value.length == 1 && (value[0] > 0)){<br/>                // simple Integer Value<br/>                return value[0] / scaleFloatFactor[scale] * signum;<br/>            }else<br/>            if (value.length == 1){<br/>                // overflow Integer Value<br/>                long temp = value[0] & 0xFFFFFFFFL;<br/>                return temp / scaleFloatFactor[scale] * signum;<br/>            }else<br/>            if (value.length == 2 && (value[0] > 0)){<br/>                // simple Long Value<br/>                long temp = (((long)value[0]) << 32) | (value[1] & 0xFFFFFFFFL);<br/>                return temp / scaleFloatFactor[scale] * signum;<br/>            }else{<br/>                return new BigDecimal( new BigInteger( toByteArray() ), scale ).floatValue();<br/>            }<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone99"></a>
<pre><code class="language-java">
{<br/>                if(fullReturnCounter >= fullRowCount){<br/>                    return false; <br/>                }<br/>                right.next();<br/>            }
</code></pre><br/><br/>

<a name="codeclone100"></a>
<pre><code class="language-java">
{<br/>		Expression[] dataNew = new Expression[newSize];<br/>		System.arraycopy(data, 0, dataNew, 0, size);<br/>		data = dataNew;		<br/>	}
</code></pre><br/><br/>

<a name="codeclone101"></a>
<pre><code class="language-java">
{<br/>    	if(init) return;<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		dropTable( con, "exceptions");<br/>		st.execute("Create Table exceptions (c varchar(30), i int)");<br/>		init = true;<br/>    }
</code></pre><br/><br/>

<a name="codeclone102"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return String.valueOf(getInt());<br/>	}
</code></pre><br/><br/>

<a name="codeclone103"></a>
<pre><code class="language-java">
{<br/>			if(raFile != null)<br/>				try{<br/>					raFile.close();<br/>				}catch(Exception e2){<br/>					DriverManager.println(e2.toString());<br/>				}<br/>			throw SmallSQLException.createFromException(e);<br/>		}
</code></pre><br/><br/>

<a name="codeclone104"></a>
<pre><code class="language-java">
{<br/>        SSPreparedStatement pr = new SSPreparedStatement( this, sql);<br/>        pr.setNeedGeneratedKeys(columnIndexes);<br/>        return pr;<br/>    }
</code></pre><br/><br/>

<a name="codeclone105"></a>
<pre><code class="language-java">
{<br/>				if(isLast){<br/>					node.saveValue(rowOffset);<br/>					return null;<br/>				}<br/>				return node.addRoot();<br/>			}
</code></pre><br/><br/>

<a name="codeclone106"></a>
<pre><code class="language-java">
{<br/>			for(int i=0; i>places; i--){<br/>				factor *= 10;<br/>			}<br/>			value /= factor;<br/>		}
</code></pre><br/><br/>

<a name="codeclone107"></a>
<pre><code class="language-java">
{<br/>			oldValue = rs.getBoolean("b");<br/>			assertFalse(rs.wasNull());<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone108"></a>
<pre><code class="language-java">
{<br/>			String newValue = rs.getString("v");<br/>			assertTrue( oldValue + "<" + newValue, oldValue.compareTo( newValue ) < 0 );<br/>			oldValue = newValue;<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone109"></a>
<pre><code class="language-java">
{<br/>        StringBuffer buf = new StringBuffer(bytes.length << 1);<br/>        for(int i=0; i<bytes.length; i++){<br/>            buf.append( digits[ (bytes[i] >> 4) & 0x0F ] );<br/>            buf.append( digits[ (bytes[i]     ) & 0x0F ] );<br/>        }<br/>        return buf.toString();<br/>    }
</code></pre><br/><br/>

<a name="codeclone110"></a>
<pre><code class="language-java">
{<br/>					if(expr.isNull())<br/>						dataType = expr.getDataType();<br/>					else<br/>						initValue( expr );<br/>				}
</code></pre><br/><br/>

<a name="codeclone111"></a>
<pre><code class="language-java">
{<br/>        byte[] daten = new byte[length];<br/>        System.arraycopy( page, offset, daten, 0, length);<br/>        offset += length;<br/>        return daten;<br/>    }
</code></pre><br/><br/>

<a name="codeclone112"></a>
<pre><code class="language-java">
{<br/>		if(param1.isNull()) return 0;<br/>		DateTime.Details details = new DateTime.Details(param1.getLong());<br/>		return details.day;<br/>	}
</code></pre><br/><br/>

<a name="codeclone113"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            return Double.parseDouble( val ) != 0;<br/>        }catch(NumberFormatException e){/*ignore it if it not a number*/}<br/>        return "true".equalsIgnoreCase( val ) || "yes".equalsIgnoreCase( val ) || "t".equalsIgnoreCase( val );<br/>    }
</code></pre><br/><br/>

<a name="codeclone114"></a>
<pre><code class="language-java">
{<br/>						if(status.nodeValue instanceof IndexNode){<br/>							level++;<br/>							nodeStack.push(<br/>								new IndexNodeScrollStatus( 	(IndexNode)status.nodeValue, <br/>														(expressions.get(level).getAlias() != SQLTokenizer.DESC_STR), <br/>														scroll, level));<br/>							continue;<br/>						}else<br/>							return getReturnValue(status.nodeValue);<br/>					}
</code></pre><br/><br/>

<a name="codeclone115"></a>
<pre><code class="language-java">
{<br/>				failed = true;<br/>                msgBuf.append("\nMissing entries for language ").append( OTHER_LANGUAGES[i] ).append(": ");<br/>				<br/>				for (Iterator itr = diff.iterator(); itr.hasNext(); ) {<br/>					msgBuf.append(itr.next());<br/>					if (itr.hasNext()) msgBuf.append(',');<br/>				}<br/>			}
</code></pre><br/><br/>

<a name="codeclone116"></a>
<pre><code class="language-java">
{<br/>        if(generatedKeys == null)<br/>            throw SmallSQLException.create(Language.GENER_KEYS_UNREQUIRED);<br/>        return generatedKeys;<br/>    }
</code></pre><br/><br/>

<a name="codeclone117"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        Statement st = con.createStatement();<br/>        st.execute("create table "+table+" (keyField varchar(2) primary key)");<br/>        st.execute("alter table "+table+" add anotherField varchar(4)");<br/>        ResultSet rs = st.executeQuery("Select * From " + table);<br/>        assertRSMetaData( rs, new String[]{"keyField", "anotherField"},  new int[]{Types.VARCHAR, Types.VARCHAR} );<br/>        rs = con.getMetaData().getIndexInfo( null, null, table, false, false );<br/>        assertRowCount( 1, rs );<br/>    }
</code></pre><br/><br/>

<a name="codeclone118"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            MutableNumeric obj = getValue(i).getNumeric();<br/>            wasNull = obj == null;<br/>            if(wasNull) return null;<br/>            return obj.toBigDecimal();<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone119"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            byte[] obj = getValue(i).getBytes();<br/>            wasNull = obj == null;<br/>            return obj;<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone120"></a>
<pre><code class="language-java">
{<br/>				DateTime.Details details2 = new DateTime.Details(param2.getLong());<br/>				details2.year += param1.getLong();<br/>				return DateTime.calcMillis(details2);<br/>			}
</code></pre><br/><br/>

<a name="codeclone121"></a>
<pre><code class="language-java">
{<br/>		scrollStatus.reset();<br/>		row = 0;<br/>		useSetRowPosition = false;<br/>	}
</code></pre><br/><br/>

<a name="codeclone122"></a>
<pre><code class="language-java">
{<br/>            if(raFile != null)<br/>                try{<br/>                    raFile.close();<br/>                }catch(Exception e2){<br/>                    DriverManager.println(e2.toString());<br/>                }<br/>            throw SmallSQLException.createFromException(e);<br/>        }
</code></pre><br/><br/>

<a name="codeclone123"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return new MutableNumeric(getString().trim());<br/>	}
</code></pre><br/><br/>

<a name="codeclone124"></a>
<pre><code class="language-java">
{<br/>		try{<br/>            moveToCurrentRow();<br/>			return getCmd().relative(rows);<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>    }
</code></pre><br/><br/>

<a name="codeclone125"></a>
<pre><code class="language-java">
{<br/>		addKeyWord( "ISNULL",      	IFNULL); //alias for IFNULL, used from MS SQL Server with 2 parameter, from MS Access with 1 parameter<br/>        addKeyWord( "IFNULL",       IFNULL);<br/>        addKeyWord( "USER",         USER);<br/>        addKeyWord( "CONVERT",      CONVERT);<br/>        addKeyWord( "CAST",      	CAST);<br/>		addKeyWord( "IIF",      	IIF);<br/>    }
</code></pre><br/><br/>

<a name="codeclone126"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return param1.getString().toUpperCase();<br/>	}
</code></pre><br/><br/>

<a name="codeclone127"></a>
<pre><code class="language-java">
{<br/>		// for error messages<br/>		keywords.put( new Integer(LESSER_EQU),	"<=" );<br/>		keywords.put( new Integer(UNEQUALS),   	"<>" );<br/>		keywords.put( new Integer(GREATER_EQU), ">=" );<br/>	}
</code></pre><br/><br/>

<a name="codeclone128"></a>
<pre><code class="language-java">
{<br/>                    invalidParamCount = true;<br/>                    expr = null;//only for compiler<br/>                    break;<br/>                }
</code></pre><br/><br/>

<a name="codeclone129"></a>
<pre><code class="language-java">
{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>			con.setAutoCommit(true);<br/>		}
</code></pre><br/><br/>

<a name="codeclone130"></a>
<pre><code class="language-java">
{<br/>			int idx = internalExpressions.indexOf(expr);<br/>			if(idx >= 0) return idx;<br/>			internalExpressions.add(expr);<br/>			return internalExpressions.size()-1;<br/>		}
</code></pre><br/><br/>

<a name="codeclone131"></a>
<pre><code class="language-java">
{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>		}
</code></pre><br/><br/>

<a name="codeclone132"></a>
<pre><code class="language-java">
{<br/>		Connection con = AllTests.getConnection();<br/>		try{			<br/>			con.createStatement().execute("Create Table transactions (i int identity, v varchar(20))");<br/>			assertRowCount( 0, "Select * from transactions");<br/><br/>			con.createStatement().execute("Insert Into transactions(v) Values('qwert')");<br/>			assertRowCount( 1, "Select * from transactions");<br/><br/>			con.setAutoCommit(false);<br/>			con.createStatement().execute("Insert Into transactions(v) Select v From transactions");<br/>			assertRowCount( 2, "Select * from transactions");<br/><br/>			con.createStatement().execute("Insert Into transactions(v) (Select v From transactions)");<br/>			assertRowCount( 4, "Select * from transactions");<br/>			<br/>			con.rollback();<br/>			assertRowCount( 1, "Select * from transactions");<br/>			<br/>		}finally{<br/>			try{<br/>				con.createStatement().execute("Drop Table transactions");<br/>			}catch(Throwable e){e.printStackTrace();}<br/>			con.setAutoCommit(true);<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone133"></a>
<pre><code class="language-java">
{<br/>		Connection con1 = AllTests.getConnection();<br/>		Connection con2 = AllTests.createConnection();<br/>		try{		<br/>			con2.setTransactionIsolation( Connection.TRANSACTION_READ_UNCOMMITTED );<br/>			con1.createStatement().execute("Create Table transactions (i int identity, v varchar(20))");<br/>			assertRowCount( 0, "Select * from transactions");<br/><br/>			con1.setAutoCommit(false);<br/>			con1.createStatement().execute("Insert Into transactions(v) Values('qwert2')");<br/><br/>			ResultSet rs2 = con2.createStatement().executeQuery("Select count(*) from transactions");<br/>			assertTrue( rs2.next() );<br/>			assertEquals( 1, rs2.getInt(1) );<br/>		}finally{<br/>		    dropTable(con1, "transactions");<br/>			con1.setAutoCommit(true);<br/>			con2.close();<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone134"></a>
<pre><code class="language-java">
{<br/>                            keyColumnNames.add(column.getName());<br/>                            keys.add(valueExpress.getObject());<br/>                            break;<br/>                        }
</code></pre><br/><br/>

<a name="codeclone135"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		PreparedStatement pr = con.prepareStatement("Select count(*) FROM " + table1 + " Group By name Order By name DESC");<br/>		for(int i=1; i<=3; i++){<br/>			ResultSet rs = pr.executeQuery( );<br/>			assertTrue  ( "loop:"+i, rs.next());<br/>			assertEquals( "loop:"+i, 1, rs.getInt(1));<br/>			assertTrue  ( "loop:"+i, rs.next());<br/>			assertEquals( "loop:"+i, 3, rs.getInt(1));<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone136"></a>
<pre><code class="language-java">
{<br/>                    if(fullReturnCounter >= fullRowCount){<br/>                       return false; <br/>                    }<br/>                    right.next();<br/>                }
</code></pre><br/><br/>

<a name="codeclone137"></a>
<pre><code class="language-java">
{<br/>				if(isLast){<br/>					node.addNode( digit, rowOffset );<br/>					return null;<br/>				}<br/>				return node.addRoot(digit);<br/>			}
</code></pre><br/><br/>

<a name="codeclone138"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return 0;<br/>        return Math.atan2( param1.getDouble(), param2.getDouble() );<br/>    }
</code></pre><br/><br/>

<a name="codeclone139"></a>
<pre><code class="language-java">
{<br/>			String newValue = rs.getString("v");<br/>			assertTrue( oldValue.compareTo( newValue ) < 0 );<br/>			oldValue = newValue;<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone140"></a>
<pre><code class="language-java">
{<br/>			assertTrue( oldValue.compareTo( rs.getString("cc") ) < 0 );<br/>			oldValue = rs.getString("cc");<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone141"></a>
<pre><code class="language-java">
{<br/>				if(isLastValue){<br/>					node.saveValue( rowOffset);<br/>					return null;<br/>				}<br/>				return node.addRoot();<br/>			}
</code></pre><br/><br/>

<a name="codeclone142"></a>
<pre><code class="language-java">
{<br/>        Object obj = getObject();<br/>        if(obj == null) return null;<br/>        return obj.toString();<br/>    }
</code></pre><br/><br/>

<a name="codeclone143"></a>
<pre><code class="language-java">
{<br/>			String newValue = rs.getString("v");<br/>			assertTrue( oldValue.compareTo( newValue ) < 0 );<br/>			oldValue = newValue;<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone144"></a>
<pre><code class="language-java">
{<br/>				if(isLast){<br/>					node.addRemainderKey( rowOffset, key, i );<br/>					return null;<br/>				}<br/>				return node.addRootValue( key, i );<br/>			}
</code></pre><br/><br/>

<a name="codeclone145"></a>
<pre><code class="language-java">
{<br/>                TransactionStep page = (TransactionStep)commitPages.get(i);<br/>                page.rollback();<br/>                page.freeLock();<br/>            }
</code></pre><br/><br/>

<a name="codeclone146"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            Statement st = con.createStatement();<br/>            st.execute("DELETE FROM " + tableName);<br/>            st.close();<br/>        }catch(Exception e){/* ignore it */}<br/>    }
</code></pre><br/><br/>

<a name="codeclone147"></a>
<pre><code class="language-java">
{<br/>                // There are not the correct count of rows.<br/>                if (count == 0){<br/>                    createTestDataWithClassicInsert( con );<br/>                    rs = st1.executeQuery( "SELECT count(*) FROM " + tableName);<br/>                    rs.next();<br/>                    count = rs.getInt(1);<br/>                }<br/>                if (count != rowCount){<br/>                    System.out.println( "  Failed: Only " + (rowCount-count) + " rows were found.");<br/>                    return;<br/>                }<br/>            }
</code></pre><br/><br/>

<a name="codeclone148"></a>
<pre><code class="language-java">
{<br/>		String message = (String) messages.get(key);<br/>		assert(message != null): "Message code not found: " + key;<br/>		return message;<br/>	}
</code></pre><br/><br/>

<a name="codeclone149"></a>
<pre><code class="language-java">
{<br/>				recreateTestTab(stat);<br/>	<br/>				stat.execute("CREATE TABLE " + TABLE_NAME + " (id_test INT)");<br/>				fail();<br/>			}
</code></pre><br/><br/>

<a name="codeclone150"></a>
<pre><code class="language-java">
{<br/>			recreateTestTab(stat);<br/>			<br/>			stat.execute("CREATE TABLE " + TABLE_NAME + " (id_test INT)");<br/>			fail();<br/>		}
</code></pre><br/><br/>

<a name="codeclone151"></a>
<pre><code class="language-java">
{<br/>            // trim for CHAR and BINARY<br/>            if(obj1 instanceof String) obj1 = ((String)obj1).trim();<br/>            if(obj1 instanceof byte[]){<br/>                byte[] tmp = (byte[])obj1;<br/>                int k=tmp.length-1;<br/>                for(; k>= 0; k--) if(tmp[k] != 0) break;<br/>                k++;<br/>                byte[] tmp2 = new byte[k];<br/>                System.arraycopy( tmp, 0, tmp2, 0, k);<br/>                obj1 = tmp2;<br/>            }<br/>        }
</code></pre><br/><br/>

<a name="codeclone152"></a>
<pre><code class="language-java">
{<br/>		Set inserted = new HashSet(); // for duplicates checking<br/>		<br/>		for (int i = 0; i < SQL_STATES.length; i++) {<br/>			String key = SQL_STATES[i][0];<br/>			<br/>			if (! inserted.add(key)) {<br/>				throw new IllegalArgumentException("Duplicate key: " + key);<br/>			}<br/>			else {<br/>				String value = SQL_STATES[i][1];<br/>				sqlStates.put(key, value);<br/>			}<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone153"></a>
<pre><code class="language-java">
{<br/>			Statement st = con.createStatement();<br/>			st.execute("drop table "+name);<br/>			st.close();<br/>		}
</code></pre><br/><br/>

<a name="codeclone154"></a>
<pre><code class="language-java">
{<br/>        try {<br/>            dropTable( AllTests.getConnection(), table );<br/>        } catch (SQLException ex) {<br/>            ex.printStackTrace();<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone155"></a>
<pre><code class="language-java">
{<br/>						if(isTypeView){<br/>							row[3] = "VIEW";<br/>							rows.add(row);<br/>						}<br/>					}
</code></pre><br/><br/>

<a name="codeclone156"></a>
<pre><code class="language-java">
{<br/>							Iterator values = locks.values().iterator();<br/>							while(values.hasNext()){<br/>								TableStorePage lock = (TableStorePage)values.next();<br/>								if(lock.con != con) return null;<br/>							}<br/>						}
</code></pre><br/><br/>

<a name="codeclone157"></a>
<pre><code class="language-java">
{<br/>		try{<br/>            moveToCurrentRow();<br/>			return getCmd().previous();<br/>		}catch(Exception e){<br/>			throw SmallSQLException.createFromException(e);<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone158"></a>
<pre><code class="language-java">
{<br/>        addKeyWord( "D",    D);<br/>        addKeyWord( "T",    T);<br/>        addKeyWord( "TS",   TS);<br/>        addKeyWord( "FN",   FN);<br/>        addKeyWord( "CALL", CALL);<br/>        addKeyWord( "OJ", OJ);<br/>    }
</code></pre><br/><br/>

<a name="codeclone159"></a>
<pre><code class="language-java">
{<br/>        // for Error messages<br/>        keywords.put( new Integer(VALUE),       "<expression>" );<br/>        keywords.put( new Integer(IDENTIFIER),   "<identifier>" );<br/>        keywords.put( new Integer(NUMBERVALUE), "<number>" );<br/>    }
</code></pre><br/><br/>

<a name="codeclone160"></a>
<pre><code class="language-java">
{<br/>                        invalidParamCount = true;<br/>                        expr = null;//Only for the compiler<br/>                        break;<br/>                    }
</code></pre><br/><br/>

<a name="codeclone161"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return new MutableNumeric(getString().trim());<br/>	}
</code></pre><br/><br/>

<a name="codeclone162"></a>
<pre><code class="language-java">
{<br/>                prev = node;<br/>                node = node.nextLetter;<br/>                wasNextEntry = false;<br/>            }
</code></pre><br/><br/>

<a name="codeclone163"></a>
<pre><code class="language-java">
{<br/>        try{<br/>            MutableNumeric obj = getValue(columnIndex).getNumeric();<br/>            wasNull = obj == null;<br/>            if(wasNull) return null;<br/>            return obj.toBigDecimal(scale);<br/>        }catch(Exception e){<br/>            throw SmallSQLException.createFromException( e );<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone164"></a>
<pre><code class="language-java">
{<br/>        TestValue value = new TestValue();<br/>        value.dataType  = dataType;<br/>        value.small     = small;<br/>        value.large     = large;<br/>        return value;<br/>    }
</code></pre><br/><br/>

<a name="codeclone165"></a>
<pre><code class="language-java">
{<br/>		int precision = 0;<br/>		for(int i=results.size()-1; i>=0; i--){<br/>			precision = Math.max(precision, results.get(i).getScale());<br/>		}<br/>		return precision;<br/>	}
</code></pre><br/><br/>

<a name="codeclone166"></a>
<pre><code class="language-java">
{<br/>		if(isNull()) return null;<br/>		return param1.getString().toLowerCase();<br/>	}
</code></pre><br/><br/>

<a name="codeclone167"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        DatabaseMetaData md = con.getMetaData();<br/>        assertEquals(con, md.getConnection());<br/>    }
</code></pre><br/><br/>

<a name="codeclone168"></a>
<pre><code class="language-java">
{<br/>				factor *=10;<br/>				if(factor == 1000000000){<br/>					mul(factor);<br/>					factor = 1;<br/>				}<br/>			}
</code></pre><br/><br/>

<a name="codeclone169"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		PreparedStatement pr = con.prepareStatement("Select abs(sum(abs(3-id))+2) FROM " + table1 + " Group By name+'a' Order By 'b'+(Name+'a')");<br/>		for(int i=1; i<=3; i++){<br/>			ResultSet rs = pr.executeQuery( );<br/>			assertTrue  ( "loop:"+i, rs.next());<br/>			assertEquals( "loop:"+i, 5, rs.getInt(1));<br/>			assertTrue  ( "loop:"+i, rs.next());<br/>			assertEquals( "loop:"+i, 4, rs.getInt(1));<br/>		}<br/>	}
</code></pre><br/><br/>

<a name="codeclone170"></a>
<pre><code class="language-java">
{<br/>		Expression[] array = new Expression[size];<br/>		System.arraycopy( data, 0, array, 0, size);<br/>		return array;<br/>	}
</code></pre><br/><br/>

<a name="codeclone171"></a>
<pre><code class="language-java">
{<br/>					byte[] buffer = new byte[length];<br/>					System.arraycopy(bytes, 0, buffer, 0, Math.min(bytes.length,length) );<br/>					return buffer;<br/>				}
</code></pre><br/><br/>

<a name="codeclone172"></a>
<pre><code class="language-java">
{<br/>				result[b] = EXECUTE_FAILED;<br/>				if(failed == null){<br/>					failed = new BatchUpdateException(ex.getMessage(), ex.getSQLState(), ex.getErrorCode(), result);<br/>					failed.initCause(ex);<br/>				}<br/>				failed.setNextException(ex);<br/>			}
</code></pre><br/><br/>

<a name="codeclone173"></a>
<pre><code class="language-java">
{<br/>				if(isLastValue){<br/>					node.addRemainderKey( rowOffset, key, i );<br/>					return null;<br/>				}<br/>				return node.addRootValue( key, i);<br/>			}
</code></pre><br/><br/>

<a name="codeclone174"></a>
<pre><code class="language-java">
{<br/>        Connection con = AllTests.getConnection();<br/>        try{<br/>            Statement st = con.createStatement();<br/>            st.execute("Create Table DuplicatedColumn(col INT)");<br/>            try{<br/>                st.execute("INSERT INTO DuplicatedColumn(col,Col) Values(1,2)");<br/>                fail("SQLException 'Duplicated Column' should be throw");<br/>            }catch(SQLException e){<br/>                assertSQLException("01000", 0, e);<br/>            }<br/>        }finally{<br/>            dropTable(con, "DuplicatedColumn");<br/>        }<br/>    }
</code></pre><br/><br/>

<a name="codeclone175"></a>
<pre><code class="language-java">
{<br/>			assertTrue( oldValue.compareTo( rs.getString("v") ) < 0 );<br/>			oldValue = rs.getString("v");<br/>			count++;<br/>		}
</code></pre><br/><br/>

<a name="codeclone176"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);<br/>		ResultSet rs;<br/>		int count;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by v");<br/>		<br/>		//jetzt irgendwo in die Mitte scrollen<br/>		rs.next();<br/>		rs.next();<br/>		rs.previous(); //dann soll der Zeiger nicht am Ende des bereits gefetchten stehen<br/>		<br/>		rs.last();<br/>		count = 0;<br/>		while(rs.previous()) count++;		<br/>		assertEquals( valueCount, count );<br/><br/>		rs.beforeFirst();<br/>		count = -1;<br/>		while(rs.next()) count++;		<br/>		assertEquals( valueCount, count );<br/><br/>		rs.beforeFirst();<br/>		count = -1;<br/>		while(rs.next()) count++;		<br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

<a name="codeclone177"></a>
<pre><code class="language-java">
{<br/>				if(isLastValue){<br/>					node.addNode( digit, rowOffset );<br/>					return null;<br/>				}<br/>				return node.addRoot(digit);<br/>			}
</code></pre><br/><br/>

<a name="codeclone178"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		ResultSet rs;<br/>		String oldValue;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by v desc, i asc");<br/>		<br/>		assertTrue( rs.next() );<br/>		oldValue = rs.getString("v");<br/>		<br/>		int count = 1;<br/>		while(oldValue != null && rs.next()){<br/>			String newValue = rs.getString("v");<br/>			if(newValue != null){<br/>				assertTrue( oldValue.compareTo( newValue ) > 0 );<br/>				count++;<br/>			}<br/>			oldValue = newValue;<br/>		}<br/>		assertNull(oldValue);<br/>		assertFalse( rs.next() );<br/><br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

<a name="codeclone179"></a>
<pre><code class="language-java">
{<br/>		init();<br/>		Connection con = AllTests.getConnection();<br/>		Statement st = con.createStatement();<br/>		ResultSet rs;<br/>		String oldValue;<br/>		<br/>		rs = st.executeQuery("SELECT * FROM " + table1 + " ORDER  by v desc");<br/>		<br/>		assertTrue( rs.next() );<br/>		oldValue = rs.getString("v");<br/>		<br/>		int count = 1;<br/>		while(oldValue != null && rs.next()){<br/>			String newValue = rs.getString("v");<br/>			if(newValue != null){<br/>				assertTrue( oldValue.compareTo( newValue ) > 0 );<br/>				count++;<br/>			}<br/>			oldValue = newValue;<br/>		}<br/>		assertNull(oldValue);<br/>		assertFalse( rs.next() );<br/><br/>		assertEquals( valueCount, count );<br/>	}
</code></pre><br/><br/>

</body></html>